============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-8.3.4, pluggy-1.6.0 -- C:\Users\lenovo\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\python.exe
cachedir: .pytest_cache
metadata: {'Python': '3.11.9', 'Platform': 'Windows-10-10.0.26200-SP0', 'Packages': {'pytest': '8.3.4', 'pluggy': '1.6.0'}, 'Plugins': {'allure-pytest': '2.13.5', 'anyio': '4.12.1', 'bdd': '8.1.0', 'html': '4.1.1', 'metadata': '3.1.1', 'xdist': '3.6.1'}, 'JAVA_HOME': 'C:\\Program Files\\Java\\jdk-25'}
rootdir: D:\HistoryMindAI\vietnam_history_dataset
plugins: allure-pytest-2.13.5, anyio-4.12.1, bdd-8.1.0, html-4.1.1, metadata-3.1.1, xdist-3.6.1
collecting ... collected 33 items

tests/test_engine_dedup.py::TestNormalizeForDedup::test_empty_string PASSED [  3%]
tests/test_engine_dedup.py::TestNormalizeForDedup::test_year_prefix_nam PASSED [  6%]
tests/test_engine_dedup.py::TestNormalizeForDedup::test_year_prefix_parenthetical PASSED [  9%]
tests/test_engine_dedup.py::TestNormalizeForDedup::test_year_prefix_dash PASSED [ 12%]
tests/test_engine_dedup.py::TestNormalizeForDedup::test_bullet_strip PASSED [ 15%]
tests/test_engine_dedup.py::TestNormalizeForDedup::test_markdown_bold_strip PASSED [ 18%]
tests/test_engine_dedup.py::TestNormalizeForDedup::test_equivalent_formats PASSED [ 21%]
tests/test_engine_dedup.py::TestAggregateEvents::test_empty_list PASSED  [ 24%]
tests/test_engine_dedup.py::TestAggregateEvents::test_exact_duplicates PASSED [ 27%]
tests/test_engine_dedup.py::TestAggregateEvents::test_near_duplicate_year_prefix PASSED [ 30%]
tests/test_engine_dedup.py::TestAggregateEvents::test_different_events_preserved PASSED [ 33%]
tests/test_engine_dedup.py::TestAggregateEvents::test_keeps_longer_story PASSED [ 36%]
tests/test_engine_dedup.py::TestAggregateEvents::test_year_zero_handling PASSED [ 39%]
tests/test_engine_dedup.py::TestIsSimilarEvent::test_exact_match PASSED  [ 42%]
tests/test_engine_dedup.py::TestIsSimilarEvent::test_year_prefix_difference PASSED [ 45%]
tests/test_engine_dedup.py::TestIsSimilarEvent::test_containment PASSED  [ 48%]
tests/test_engine_dedup.py::TestIsSimilarEvent::test_completely_different PASSED [ 51%]
tests/test_engine_dedup.py::TestIsSimilarEvent::test_keyword_overlap PASSED [ 54%]
tests/test_engine_dedup.py::TestDeduplicateAnswer::test_empty_text PASSED [ 57%]
tests/test_engine_dedup.py::TestDeduplicateAnswer::test_no_duplicates PASSED [ 60%]
tests/test_engine_dedup.py::TestDeduplicateAnswer::test_exact_duplicate_lines PASSED [ 63%]
tests/test_engine_dedup.py::TestDeduplicateAnswer::test_near_duplicate_lines PASSED [ 66%]
tests/test_engine_dedup.py::TestDeduplicateAnswer::test_preserves_headers PASSED [ 69%]
tests/test_engine_dedup.py::TestDeduplicateAnswer::test_preserves_empty_lines PASSED [ 72%]
tests/test_engine_dedup.py::TestIntraLineDedup::test_exact_user_reported_case PASSED [ 75%]
tests/test_engine_dedup.py::TestIntraLineDedup::test_year_marker_split_dedup PASSED [ 78%]
tests/test_engine_dedup.py::TestIntraLineDedup::test_sentence_level_dedup PASSED [ 81%]
tests/test_engine_dedup.py::TestIntraLineDedup::test_no_false_positive_short PASSED [ 84%]
tests/test_engine_dedup.py::TestIntraLineDedup::test_no_false_positive_distinct PASSED [ 87%]
tests/test_engine_dedup.py::TestIntraLineDedup::test_dedup_answer_single_line PASSED [ 90%]
tests/test_engine_dedup.py::TestCanonicalizeYearFormat::test_parenthetical_year PASSED [ 93%]
tests/test_engine_dedup.py::TestCanonicalizeYearFormat::test_preserves_normal_text PASSED [ 96%]
tests/test_engine_dedup.py::TestIntegration::test_full_pipeline_removes_duplicates PASSED [100%]

============================= 33 passed in 0.08s ==============================
